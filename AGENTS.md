# Repository Guidelines

## Project Structure & Module Organization
The Next.js App Router lives in `app/`, which also contains API handlers (`app/api/**`) and core flows such as `app/assistant.tsx`. Shared UI sits in `components/` with Tailwind styling defined in `app/globals.css`. Cross-feature hooks belong in `hooks/`, reusable helpers in `lib/`, and shared validators and types in `schemas/`. Keep generated contract files annotated with `@generated by codex.chatfleet` and mirror backend Zod exports via `schemas/index.ts`.

## Build, Test, and Development Commands
Run `npm install` after cloning to sync dependencies. Use `npm run dev` for local development at `http://localhost:3000` (Turbopack). `npm run lint` executes `next lint` with TypeScript, React, and accessibility checks. Build and serve production bundles with `npm run build` followed by `npm run start`. Format and sort Tailwind classes using `npm run prettier:fix`; check formatting with `npm run prettier`.

## Coding Style & Naming Conventions
Prefer TypeScript over `any`, reusing types from `schemas/` or `lib/`. Components are `PascalCase`, hooks follow `useCamelCase`, and helpers use `camelCase`. Respect Prettier defaults (2-space indentation) and allow the Tailwind plugin to manage class order—never rearrange manually. Add succinct comments only when behavior is non-obvious.

## Testing Guidelines
There is no automated suite yet; always run `npm run lint` before opening a PR. When adding tests, co-locate them as `*.test.tsx` or `*.spec.ts`. Document manual validation in the PR body, including browser, prompt sequences, and backend responses. Favor additional tests for high-risk changes and expose new npm scripts when introducing tooling.

## Commit & Pull Request Guidelines
Follow the Conventional Commit-inspired format `type(scope): summary (#issue)` and keep commits focused on related changes. PRs require a concise summary, relevant screenshots or recordings, linked issues, and notes on new environment variables or migrations.

## Agent Integration Notes
Respect the existing assistant UI; avoid rewriting `AssistantUI.tsx` or layout files. Maintain the `/chat/stream` SSE contract (`ready → chunk* → citations → done → ping`) and validate responses with Zod before updating state. Persist JWT tokens from `/auth/login`, refresh via `/auth/me`, and gate `/admin/**` by decoded roles. Configure `.env.local` with `NEXT_PUBLIC_API_BASE=http://localhost:8000/api` and `NEXT_PUBLIC_SSE_HEARTBEAT_MS=15000`; never commit secrets.
